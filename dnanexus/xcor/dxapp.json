{
    "name": "xcor",
    "title": "ENCODE TF ChIP-seq Cross-Correlation Analysis",
    "summary": "Take a bam file from SE or PE sequencing, create tagAlign file and generate cross-corelation scores and plot",
    "dxapi": "1.0.0",
    "version": "0.0.1",
    "categories": [
        "ENCODE Analysis Pipeline"
    ],
    "inputSpec": [
        {
            "name": "paired_end",
            "class": "boolean",
            "optional": false
        },
        {
            "name": "input_bam",
            "label": "Filtered SE BAM file",
            "class": "file",
            "optional": true
        },
        {
            "name": "input_tagAlign",
            "label": "Filtered SE tagAlign file",
            "class": "file",
            "optional": true
        },
        {
            "name": "input_fastq",
            "label": "SE or read1 fastq",
            "class": "file",
            "optional": true
        },
        {
            "name": "reference_tar",
            "label": "If fastq is supplied, map to this reference bwa index",
            "class": "file",
            "optional": true
        },
        {
          "name": "crop_length",
          "label": "If fastq is supplied, crop all reads to this length",
          "class": "string",
          "optional": true,
          "default": "50"
        },
        {
          "name": "Nreads",
          "label": "The number of reads to subsample",
          "class": "int",
          "default": 15000000
        }
    ],
    "outputSpec": [
        {
            "name": "CC_scores_file",
            "label": "Tab-delimited NSC/RSC results",
            "class": "file"
        },
        {
            "name": "CC_plot_file",
            "label": "Cross-correlation plot",
            "class": "file"
        },
        {
            "name": "RSC",
            "label": "Relative strand cross-correlation",
            "class": "float"
        },
        {
            "name": "NSC",
            "label": "Normalized strand cross-correlation",
            "class": "float"
        },
        {
            "name": "est_frag_len",
            "label": "Estimated fragment length",
            "class": "int"
        }
    ],
    "runSpec": {
        "interpreter": "python2.7",
        "file": "src/xcor.py",
        "execDepends": [],
        "assetDepends": [
          {"name": "samtools_asset",
           "project": "project-BKp5K980bpZZ096Xp1XQ02fZ",
           "version": "0.0.1",
           "folder": "/" 
          },
          {"name": "bioconductor_asset",
           "project": "project-BKpvFg00VBPV975PgJ6Q03v6",
           "version": "0.0.1",
           "folder": "/ChIP-seq/assets/" 
          },
          {
            "name": "bedtools_asset",
            "project": "project-BKpvFg00VBPV975PgJ6Q03v6",
            "version": "0.0.1",
            "folder": "/ChIP-seq/assets/"
          },
          {
            "name": "common_asset",
            "project": "project-BKpvFg00VBPV975PgJ6Q03v6",
            "version": "0.0.1",
            "folder": "/ChIP-seq/assets/"
          },
          {
            "name": "spp_asset",
            "project": "project-BKpvFg00VBPV975PgJ6Q03v6",
            "version": "0.0.1",
            "folder": "/ChIP-seq/assets/"
          }
        ],
        "systemRequirements": {
            "main": {"instanceType": "mem3_hdd2_x2"}
        }
    },
    "access": {
        "network": [
            "*"
        ]
    },
    "authorizedUsers": []
}
